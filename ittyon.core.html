<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>ittyon.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Ittyon 0.7.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ittyon</span></div></div></li><li class="depth-2 branch"><a href="ittyon.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-2 branch current"><a href="ittyon.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="ittyon.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="ittyon.core.html#var--index"><div class="inner"><span>-index</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var--react"><div class="inner"><span>-react</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var--valid.3F"><div class="inner"><span>-valid?</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-commit"><div class="inner"><span>commit</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-derive"><div class="inner"><span>derive</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-facts"><div class="inner"><span>facts</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-index"><div class="inner"><span>index</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-periodically"><div class="inner"><span>periodically</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-react"><div class="inner"><span>react</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-state"><div class="inner"><span>state</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-tick"><div class="inner"><span>tick</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-time"><div class="inner"><span>time</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-transact"><div class="inner"><span>transact</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-transition.3F"><div class="inner"><span>transition?</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-update"><div class="inner"><span>update</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-update-snapshot"><div class="inner"><span>update-snapshot</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-uuid"><div class="inner"><span>uuid</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-uuid.3F"><div class="inner"><span>uuid?</span></div></a></li><li class="depth-1"><a href="ittyon.core.html#var-valid.3F"><div class="inner"><span>valid?</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">ittyon.core</h2><div class="doc"><div class="markdown"><p>An in-memory immutable database designed to manage game state.</p></div></div><div class="public anchor" id="var--index"><h3>-index</h3><div class="usage"><code>(-index state transition)</code></div><div class="doc"><div class="markdown"><p>An intention to update the supplied index with a transition. Expected to return a function that updates the index. Dispatches off the transition op and the aspect. Composes the returned functions.</p></div></div></div><div class="public anchor" id="var--react"><h3>-react</h3><div class="usage"><code>(-react state transition)</code></div><div class="doc"><div class="markdown"><p>An intention that returns an ordered collection of reaction transitions, given a state and a valid transition. Dispatches off the transition op and the aspect. Concatenates the results of inherited keys.</p></div></div></div><div class="public anchor" id="var--valid.3F"><h3>-valid?</h3><div class="usage"><code>(-valid? state transition)</code></div><div class="doc"><div class="markdown"><p>An intention to determine whether a transition is valid for a particular state. Dispatches off the transition op and the aspect. Combines results of inherited keys with logical AND.</p></div></div></div><div class="public anchor" id="var-commit"><h3>commit</h3><div class="usage"><code>(commit state transition)</code></div><div class="doc"><div class="markdown"><p>Takes a state and a transition, and if the transition is valid, returns a new state with the transition and any reactions applied. If the transition is not valid for the state, the state is returned unchanged.</p></div></div></div><div class="public anchor" id="var-derive"><h3>derive</h3><div class="usage"><code>(derive h? tag &amp; parents)</code></div><div class="doc"><div class="markdown"><p>Operates the same as clojure.core/derive, except that multiple parent arguments may be specified.</p></div></div></div><div class="public anchor" id="var-facts"><h3>facts</h3><div class="usage"><code>(facts state)</code></div><div class="doc"><div class="markdown"><p>Return an ordered collection of facts held by the supplied state.</p></div></div></div><div class="public anchor" id="var-index"><h3>index</h3><div class="usage"><code>(index state transition)</code></div><div class="doc"><div class="markdown"><p>Update the state&rsquo;s indexes for a single transition. Extend using the <a href="ittyon.core.html#var--index">-index</a> intention.</p></div></div></div><div class="public anchor" id="var-periodically"><h3>periodically</h3><div class="usage"><code>(periodically freq func)</code></div><div class="doc"><div class="markdown"><p>Periodically evaluate a zero-argument function a specified number of times a second.</p></div></div></div><div class="public anchor" id="var-react"><h3>react</h3><div class="usage"><code>(react state transition)</code></div><div class="doc"><div class="markdown"><p>Return a seq of reaction transitions, or nil, for a given state and transition. Extend using the <a href="ittyon.core.html#var--react">-react</a> intention.</p></div></div></div><div class="public anchor" id="var-state"><h3>state</h3><div class="usage"><code>(state)</code><code>(state facts)</code></div><div class="doc"><div class="markdown"><p>Return a new state, either empty or prepopulated with a collection of facts.</p></div></div></div><div class="public anchor" id="var-tick"><h3>tick</h3><div class="usage"><code>(tick state time)</code></div><div class="doc"><div class="markdown"><p>Update a state by moving the clock forward to a new time. This may generate reactions that alter the state.</p></div></div></div><div class="public anchor" id="var-time"><h3>time</h3><div class="usage"><code>(time)</code></div><div class="doc"><div class="markdown"><p>Return the current system time in milliseconds.</p></div></div></div><div class="public anchor" id="var-transact"><h3>transact</h3><div class="usage"><code>(transact state transitions)</code></div><div class="doc"><div class="markdown"><p>Takes a state and an ordered collection of transitions, and returns a new state with the transitions committed in order. Also adds a <code>:last-transact</code> key to the resulting state that contains the committed transitions.</p></div></div></div><div class="public anchor" id="var-transition.3F"><h3>transition?</h3><div class="usage"><code>(transition? x)</code></div><div class="doc"><div class="markdown"><p>Return true if x is a transition. A transition is a vector of five values, commonly abbreviated to <code>[o e a v t]</code>. The op, o, is either <code>:assert</code> or <code>:revoke</code>. The aspect, a, must be a keyword.</p></div></div></div><div class="public anchor" id="var-update"><h3>update</h3><div class="usage"><code>(update state transition)</code></div><div class="doc"><div class="markdown"><p>Update a state with a single transition and return the new state. Combines <a href="ittyon.core.html#var-update-snapshot">update-snapshot</a> with <a href="ittyon.core.html#var-index">index</a>.</p></div></div></div><div class="public anchor" id="var-update-snapshot"><h3>update-snapshot</h3><div class="usage"><code>(update-snapshot {n :count, :as state} [o e a v t])</code></div><div class="doc"><div class="markdown"><p>Update the state&rsquo;s snapshot for a single transition.</p></div></div></div><div class="public anchor" id="var-uuid"><h3>uuid</h3><div class="usage"><code>(uuid)</code></div><div class="doc"><div class="markdown"><p>Return a random UUID.</p></div></div></div><div class="public anchor" id="var-uuid.3F"><h3>uuid?</h3><div class="usage"><code>(uuid? x)</code></div><div class="doc"><div class="markdown"><p>Return true if x is a UUID.</p></div></div></div><div class="public anchor" id="var-valid.3F"><h3>valid?</h3><div class="usage"><code>(valid? state transition)</code></div><div class="doc"><div class="markdown"><p>Return true if the transition is a valid transition for the given state. Extend using the <a href="ittyon.core.html#var--valid.3F">-valid?</a> intention.</p></div></div></div></div></body></html>